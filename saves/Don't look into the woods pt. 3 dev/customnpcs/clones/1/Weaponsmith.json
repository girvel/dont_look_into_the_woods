{
    "ReturnToStart": 1b,
    "Brain": {
        "memories": {
        }
    },
    "NpcInv": [
    ],
    "BossColor": 0,
    "PotionEffect": 0,
    "Size": 5,
    "stopAndInteract": 1b,
    "Resistances": {
        "Arrow": 2.0f,
        "Explosion": 2.0f,
        "Knockback": 2.0f,
        "Melee": 2.0f
    },
    "BossBar": 0b,
    "RespawnTime": 20,
    "NpcAngrySound": "",
    "ReactsToFire": 0b,
    "IgnoreCobweb": 0b,
    "PositionOffsetZ": 5.0f,
    "PositionOffsetY": 5.0f,
    "PositionOffsetX": 5.0f,
    "CanUpdate": 1b,
    "LootMode": 0,
    "TransformHasAI": 0b,
    "AttackStrenght": 5,
    "PersistenceRequired": 0b,
    "id": "customnpcs:customnpc",
    "IsStatue": 0b,
    "MovingPatern": 0,
    "NpcLines": {
        "Lines": [
        ]
    },
    "DefendFaction": 0b,
    "FireIndirect": 0,
    "NpcVisible": 0,
    "LinkedNpcName": "",
    "NpcScenes": {
        "Scenes": [
        ]
    },
    "HitSound": "minecraft:entity.arrow.hit",
    "FindShelter": 2,
    "Air": 300s,
    "Orientation": 0,
    "ScriptLanguage": "ECMAScript",
    "HandItems": [
        {
        },
        {
        }
    ],
    "KnockBack": 0,
    "TransformHasJob": 0b,
    "ArmorDropChances": [
        0.085f,
        0.085f,
        0.085f,
        0.085f
    ],
    "BurnInSun": 0b,
    "TraderSold": {
        "NpcMiscInv": [
            {
                "Slot": 0b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                    }
                },
                "id": "minecraft:iron_boots",
                "Count": 1b,
                "tag": {
                    "RepairCost": 0,
                    "Damage": 0,
                    "Enchantments": [
                        {
                            "lvl": 1s,
                            "id": "minecraft:protection"
                        }
                    ],
                    "display": {
                        "Name": "{\"text\":\"Сапоги Стража\"}"
                    }
                }
            },
            {
                "Slot": 2b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                    }
                },
                "id": "minecraft:iron_sword",
                "Count": 1b,
                "tag": {
                    "RepairCost": 0,
                    "Damage": 0,
                    "display": {
                        "Name": "{\"text\":\"Стальной меч\"}"
                    }
                }
            },
            {
                "Slot": 3b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                    }
                },
                "id": "minecraft:leather_helmet",
                "Count": 1b,
                "tag": {
                    "RepairCost": 0,
                    "Damage": 0,
                    "display": {
                        "color": 6192150,
                        "Name": "{\"text\":\"Шапка лесника\"}"
                    }
                }
            },
            {
                "Slot": 5b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                    }
                },
                "id": "minecraft:stone_sword",
                "Count": 1b,
                "tag": {
                    "RepairCost": 0,
                    "Damage": 0,
                    "display": {
                        "Name": "{\"text\":\"Железный меч\"}"
                    }
                }
            },
            {
                "Slot": 6b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                    }
                },
                "id": "minecraft:leather_chestplate",
                "Count": 1b,
                "tag": {
                    "RepairCost": 0,
                    "Damage": 0,
                    "display": {
                        "color": 6192150,
                        "Name": "{\"text\":\"Куртка лесника\"}"
                    }
                }
            },
            {
                "Slot": 7b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                        "ScriptEnabled": 1b,
                        "DurabilityValue": 1.0d,
                        "Scripts": [
                            {
                                "Script": "function max(a, b) {
    return a > b ? a : b
}

function tick(event) {
    event.item.setDurabilityColor(0xFF * max(0, 1 - (1 / 150) * event.player.getPos().distanceTo(event.API.getIPos(-175, 69, 121))))
}",
                                "Console": [
                                ],
                                "ScriptList": [
                                ]
                            }
                        ],
                        "ItemColor": -1,
                        "MaxStackSize": 64,
                        "DurabilityShow": 1b,
                        "ScriptLanguage": "ECMAScript",
                        "DurabilityColor": 0
                    }
                },
                "id": "customnpcs:scripted_item",
                "Count": 1b,
                "tag": {
                    "ScriptedData": {
                        "ScriptEnabled": 1b,
                        "Scripts": [
                            {
                                "Console": [
                                ],
                                "Script": "function max(a, b) {
    return a > b ? a : b
}

function tick(event) {
    event.item.setDurabilityColor(0xFF * max(0, 1 - (1 / 150) * event.player.getPos().distanceTo(event.API.getIPos(-175, 69, 121))))
}",
                                "ScriptList": [
                                ]
                            }
                        ],
                        "ScriptLanguage": "ECMAScript"
                    }
                }
            },
            {
                "Slot": 8b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                    }
                },
                "id": "minecraft:wooden_sword",
                "Count": 1b,
                "tag": {
                    "RepairCost": 0,
                    "Damage": 0,
                    "display": {
                        "Name": "{\"text\":\"Ржавый меч\"}"
                    }
                }
            },
            {
                "Slot": 9b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                    }
                },
                "id": "minecraft:leather_leggings",
                "Count": 1b,
                "tag": {
                    "RepairCost": 0,
                    "Damage": 0,
                    "display": {
                        "color": 6192150,
                        "Name": "{\"text\":\"Штаны лесника\"}"
                    }
                }
            },
            {
                "Slot": 10b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                        "ScriptEnabled": 1b,
                        "DurabilityValue": 1.0d,
                        "Scripts": [
                            {
                                "Script": "var obelisks = [];
var messages = [];
var obelisk_quest = null;

function init(event) {
    event.item.setTexture(\"minecraft:iron_axe\");
    event.item.setCustomName('ᛊᛏᛇᛁᚾᚺᛁᛚᛞᚱ');
    event.item.setLore([\"Старинный топор\", \"из розоватого металла\"]);
    event.item.setColor(0xFFAAFF);
    event.item.setDurabilityShow(true);
    event.item.setAttribute(\"generic.attack_damage\", 14, 0);
    event.item.setAttribute(\"generic.attack_speed\", -2.5, 0);
    
    messages = [
        \"Правильно. Продолжай...\",
        \"Не останавливайся, остался всего один...\",
        \"Да...\"
    ];
    
    obelisks = [
        [event.API.getIPos(-175, 72, 121), event.API.getIPos(-175, 73, 121)],
        [event.API.getIPos(-289, 73, -39), event.API.getIPos(-289, 74, -39)],
        [event.API.getIPos(-486, 69, 50), event.API.getIPos(-486, 70, 50)]
    ];
    
    obelisk_quest = event.API.getQuests().get(2);
}

function pickedUp(event){
    say(event, \"Stæinhildr: Я жажду воссоединения со своей хозяйкой. Отнеси меня к ней.\");
}

function tick(event) {
    var ds = obelisks.map(function(obelisk) {
        return event.player.getPos().distanceTo(obelisk[0]);
    });

    event.item.setDurabilityColor(colorMultiplication(0x55, 0xDD, 0xFF, Math.max(0, 1 - (1 / 150) * Math.min(ds[0], ds[1], ds[2]))));
}

function interact(event) {
    if (event.type != 2) { // is not block
        return;
    }
    
    if (!event.player.hasActiveQuest(2)) {
        return;
    }
    
    obelisks.forEach(function(obelisk, i) {
        if (event.target.getName() != \"minecraft:gilded_blackstone\") return;
    
        if (iposEqual(event.target.getPos(), obelisk[0]) || iposEqual(event.target.getPos(), obelisk[1])) {
            event.player.getWorld().setBlock(obelisk[0], \"minecraft:magma_block\");
            event.player.getWorld().setBlock(obelisk[1], \"minecraft:magma_block\");
            
            var objective = obelisk_quest.getObjectives(event.player)[0];
            say(event, \"Лилу: \" + messages[objective.getProgress()]);
            objective.setProgress(objective.getProgress() + 1);
        }
    })
}

function attack(event) {
    if (event.target && event.target.getName() == \"Большой паук\") {
        event.target.kill();
    }
}",
                                "Console": [
                                ],
                                "ScriptList": [
                                    {
                                        "Line": "tk.js"
                                    }
                                ]
                            }
                        ],
                        "ScriptTexture": "minecraft:iron_axe",
                        "ItemColor": 16755455,
                        "MaxStackSize": 64,
                        "DurabilityShow": 1b,
                        "ScriptLanguage": "ECMAScript",
                        "DurabilityColor": 1191734
                    }
                },
                "id": "customnpcs:scripted_item",
                "Count": 1b,
                "tag": {
                    "ScriptedData": {
                        "ScriptEnabled": 1b,
                        "Scripts": [
                            {
                                "Console": [
                                ],
                                "Script": "var obelisks = [];
var messages = [];
var obelisk_quest = null;

function init(event) {
    event.item.setTexture(\"minecraft:iron_axe\");
    event.item.setCustomName('ᛊᛏᛇᛁᚾᚺᛁᛚᛞᚱ');
    event.item.setLore([\"Старинный топор\", \"из розоватого металла\"]);
    event.item.setColor(0xFFAAFF);
    event.item.setDurabilityShow(true);
    event.item.setAttribute(\"generic.attack_damage\", 14, 0);
    event.item.setAttribute(\"generic.attack_speed\", -2.5, 0);
    
    messages = [
        \"Правильно. Продолжай...\",
        \"Не останавливайся, остался всего один...\",
        \"Да...\"
    ];
    
    obelisks = [
        [event.API.getIPos(-175, 72, 121), event.API.getIPos(-175, 73, 121)],
        [event.API.getIPos(-289, 73, -39), event.API.getIPos(-289, 74, -39)],
        [event.API.getIPos(-486, 69, 50), event.API.getIPos(-486, 70, 50)]
    ];
    
    obelisk_quest = event.API.getQuests().get(2);
}

function pickedUp(event){
    say(event, \"Stæinhildr: Я жажду воссоединения со своей хозяйкой. Отнеси меня к ней.\");
}

function tick(event) {
    var ds = obelisks.map(function(obelisk) {
        return event.player.getPos().distanceTo(obelisk[0]);
    });

    event.item.setDurabilityColor(colorMultiplication(0x55, 0xDD, 0xFF, Math.max(0, 1 - (1 / 150) * Math.min(ds[0], ds[1], ds[2]))));
}

function interact(event) {
    if (event.type != 2) { // is not block
        return;
    }
    
    if (!event.player.hasActiveQuest(2)) {
        return;
    }
    
    obelisks.forEach(function(obelisk, i) {
        if (event.target.getName() != \"minecraft:gilded_blackstone\") return;
    
        if (iposEqual(event.target.getPos(), obelisk[0]) || iposEqual(event.target.getPos(), obelisk[1])) {
            event.player.getWorld().setBlock(obelisk[0], \"minecraft:magma_block\");
            event.player.getWorld().setBlock(obelisk[1], \"minecraft:magma_block\");
            
            var objective = obelisk_quest.getObjectives(event.player)[0];
            say(event, \"Лилу: \" + messages[objective.getProgress()]);
            objective.setProgress(objective.getProgress() + 1);
        }
    })
}

function attack(event) {
    if (event.target && event.target.getName() == \"Большой паук\") {
        event.target.kill();
    }
}",
                                "ScriptList": [
                                    {
                                        "Line": "tk.js"
                                    }
                                ]
                            }
                        ],
                        "ScriptTexture": "minecraft:iron_axe",
                        "ScriptLanguage": "ECMAScript"
                    },
                    "AttributeModifiers": [
                        {
                            "Amount": 14.0d,
                            "Slot": "mainhand",
                            "AttributeName": "generic.attack_damage",
                            "Operation": 0,
                            "UUID": [I;2103474698,-1195815225,-1529446793,-496382085],
                            "Name": "generic.attack_damage"
                        },
                        {
                            "Amount": -2.5d,
                            "Slot": "mainhand",
                            "AttributeName": "generic.attack_speed",
                            "Operation": 0,
                            "UUID": [I;216506507,-1690614823,-2129848952,-1152349827],
                            "Name": "generic.attack_speed"
                        }
                    ],
                    "display": {
                        "Lore": [
                            "{\"translate\":\"Старинный топор\"}",
                            "{\"translate\":\"из розоватого металла\"}"
                        ],
                        "Name": "{\"translate\":\"ᛊᛏᛇᛁᚾᚺᛁᛚᛞᚱ\"}"
                    }
                }
            },
            {
                "Slot": 11b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                    }
                },
                "id": "minecraft:wooden_hoe",
                "Count": 1b,
                "tag": {
                    "RepairCost": 0,
                    "Damage": 0,
                    "display": {
                        "Name": "{\"text\":\"Ржавая гоблинская алебарда\"}"
                    }
                }
            },
            {
                "Slot": 12b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                    }
                },
                "id": "minecraft:leather_boots",
                "Count": 1b,
                "tag": {
                    "RepairCost": 0,
                    "Damage": 0,
                    "display": {
                        "color": 6192150,
                        "Name": "{\"text\":\"Сапоги лесника\"}"
                    }
                }
            },
            {
                "Slot": 13b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                        "ScriptEnabled": 1b,
                        "DurabilityValue": 1.0000003576278687d,
                        "Scripts": [
                            {
                                "Script": "var cooldown = 15;

function init(event) {
    event.item.setTexture(\"minecraft:stick\");
    event.item.setCustomName('Жезл молний');
    event.item.setLore([\"Выглядит как\", \"обычная палка\"]);
    event.item.setColor(0xffffff);
    event.item.setDurabilityShow(true);
    event.item.setAttribute(\"generic.attack_damage\", 14, 0);
    event.item.setAttribute(\"generic.attack_speed\", -2.5, 0);
}

function interact(event) {
    var target = event.player.rayTraceBlock(1000, false, false).getPos();
    
    if (target === null || isUnderCeiling(event.player.getWorld(), target, 25) || event.item.getDurabilityValue() < 1) return;
    
    event.API.executeCommand(
        event.player.getWorld(),
        \"/summon minecraft:lightning_bolt \" + target.getX() + \" \" + target.getY() + \" \" + target.getZ()
    );
    event.item.setTexture(\"minecraft:blaze_rod\");
    event.item.setDurabilityValue(0);
    
    if (target.distanceTo(event.API.getIPos(-142, 68, -96)) <= 2.5) {
        event.target.getWorld().getScoreboard().setPlayerScore(event.player.getDisplayName(), \"grave_charged\", 1);
    }
}

function tick(event) {
    event.item.setTexture(\"minecraft:stick\");
    
    if (event.item.getDurabilityValue() < 1) {
        event.item.setDurabilityValue(event.item.getDurabilityValue() + 1 / (cooldown * CNPCS_TICKS))
    }
}",
                                "Console": [
                                    {
                                        "Long": 1676821211823L,
                                        "String": "javax.script.ScriptException: TypeError: target.getPos is not a function in <eval> at line number 25
	at org.openjdk.nashorn.api.scripting.NashornScriptEngine.throwAsScriptException(NashornScriptEngine.java:463)
	at org.openjdk.nashorn.api.scripting.NashornScriptEngine.invokeImpl(NashornScriptEngine.java:385)
	at org.openjdk.nashorn.api.scripting.NashornScriptEngine.invokeFunction(NashornScriptEngine.java:186)
	at noppes.npcs.controllers.ScriptContainer.run(ScriptContainer.java:151)
	at noppes.npcs.controllers.ScriptContainer.run(ScriptContainer.java:108)
	at noppes.npcs.api.wrapper.ItemScriptedWrapper.runScript(ItemScriptedWrapper.java:156)
	at noppes.npcs.EventHooks.onScriptItemInteract(EventHooks.java:520)
	at noppes.npcs.ScriptPlayerEventHandler.invoke(ScriptPlayerEventHandler.java:113)
	at net.minecraftforge.eventbus.ASMEventHandler_70_ScriptPlayerEventHandler_invoke_RightClickBlock.invoke(.dynamic)
	at net.minecraftforge.eventbus.ASMEventHandler.invoke(ASMEventHandler.java:85)
	at net.minecraftforge.eventbus.EventBus.post(EventBus.java:302)
	at net.minecraftforge.eventbus.EventBus.post(EventBus.java:283)
	at net.minecraftforge.common.ForgeHooks.onRightClickBlock(ForgeHooks.java:824)
	at net.minecraft.server.management.PlayerInteractionManager.func_219441_a(PlayerInteractionManager.java:318)
	at net.minecraft.network.play.ServerPlayNetHandler.func_184337_a(ServerPlayNetHandler.java:958)
	at net.minecraft.network.play.client.CPlayerTryUseItemOnBlockPacket.func_148833_a(SourceFile:36)
	at net.minecraft.network.play.client.CPlayerTryUseItemOnBlockPacket.func_148833_a(SourceFile:10)
	at net.minecraft.network.PacketThreadUtil.lambda$checkThreadAndEnqueue$0(PacketThreadUtil.java:36)
	at net.optifine.util.PacketRunnable.run(PacketRunnable.java:28)
	at net.minecraft.util.concurrent.TickDelayedTask.run(SourceFile:18)
	at net.minecraft.util.concurrent.ThreadTaskExecutor.func_213166_h(ThreadTaskExecutor.java:189)
	at net.minecraft.util.concurrent.RecursiveEventLoop.func_213166_h(SourceFile:23)
	at net.minecraft.server.MinecraftServer.func_213166_h(MinecraftServer.java:734)
	at net.minecraft.server.MinecraftServer.func_213166_h(MinecraftServer.java:159)
	at net.minecraft.util.concurrent.ThreadTaskExecutor.func_213168_p(ThreadTaskExecutor.java:151)
	at net.minecraft.server.MinecraftServer.func_213205_aW(MinecraftServer.java:717)
	at net.minecraft.server.MinecraftServer.func_213168_p(MinecraftServer.java:711)
	at net.minecraft.util.concurrent.ThreadTaskExecutor.func_213161_c(ThreadTaskExecutor.java:167)
	at net.minecraft.server.MinecraftServer.func_213202_o(MinecraftServer.java:697)
	at net.minecraft.server.MinecraftServer.func_240802_v_(MinecraftServer.java:646)
	at net.minecraft.server.MinecraftServer.func_240783_a_(MinecraftServer.java:232)
	at java.base/java.lang.Thread.run(Thread.java:831)
Caused by: <eval>:25 TypeError: target.getPos is not a function
	at org.openjdk.nashorn.internal.runtime.ECMAErrors.error(ECMAErrors.java:57)
	at org.openjdk.nashorn.internal.runtime.ECMAErrors.typeError(ECMAErrors.java:212)
	at org.openjdk.nashorn.internal.runtime.ECMAErrors.typeError(ECMAErrors.java:184)
	at org.openjdk.nashorn.internal.runtime.ECMAErrors.typeError(ECMAErrors.java:171)
	at org.openjdk.nashorn.internal.runtime.Undefined.lookup(Undefined.java:100)
	at org.openjdk.nashorn.internal.runtime.linker.NashornLinker.getGuardedInvocation(NashornLinker.java:106)
	at org.openjdk.nashorn.internal.runtime.linker.NashornLinker.getGuardedInvocation(NashornLinker.java:96)
	at jdk.dynalink/jdk.dynalink.linker.support.CompositeTypeBasedGuardingDynamicLinker.getGuardedInvocation(CompositeTypeBasedGuardingDynamicLinker.java:161)
	at jdk.dynalink/jdk.dynalink.linker.support.CompositeGuardingDynamicLinker.getGuardedInvocation(CompositeGuardingDynamicLinker.java:109)
	at jdk.dynalink/jdk.dynalink.LinkerServicesImpl.lambda$getGuardedInvocation$0(LinkerServicesImpl.java:137)
	at jdk.dynalink/jdk.dynalink.LinkerServicesImpl.getWithLookupInternal(LinkerServicesImpl.java:168)
	at jdk.dynalink/jdk.dynalink.LinkerServicesImpl.getGuardedInvocation(LinkerServicesImpl.java:135)
	at jdk.dynalink/jdk.dynalink.DynamicLinker.relink(DynamicLinker.java:241)
	at org.openjdk.nashorn.internal.scripts.Script$Recompilation$391$394A$\\^eval\\_.interact(<eval>:25)
	at org.openjdk.nashorn.internal.runtime.ScriptFunctionData.invoke(ScriptFunctionData.java:648)
	at org.openjdk.nashorn.internal.runtime.ScriptFunction.invoke(ScriptFunction.java:513)
	at org.openjdk.nashorn.internal.runtime.ScriptRuntime.apply(ScriptRuntime.java:520)
	at org.openjdk.nashorn.api.scripting.ScriptObjectMirror.callMember(ScriptObjectMirror.java:187)
	at org.openjdk.nashorn.api.scripting.NashornScriptEngine.invokeImpl(NashornScriptEngine.java:379)
	... 30 more"
                                    }
                                ],
                                "ScriptList": [
                                    {
                                        "Line": "globals.js"
                                    },
                                    {
                                        "Line": "tk.js"
                                    }
                                ]
                            }
                        ],
                        "ScriptTexture": "minecraft:stick",
                        "ItemColor": 16777215,
                        "MaxStackSize": 64,
                        "DurabilityShow": 1b,
                        "ScriptLanguage": "ECMAScript",
                        "DurabilityColor": -1
                    }
                },
                "id": "customnpcs:scripted_item",
                "Count": 1b,
                "tag": {
                    "ScriptedData": {
                        "ScriptEnabled": 1b,
                        "Scripts": [
                            {
                                "Console": [
                                    {
                                        "Long": 1676821211823L,
                                        "String": "javax.script.ScriptException: TypeError: target.getPos is not a function in <eval> at line number 25
	at org.openjdk.nashorn.api.scripting.NashornScriptEngine.throwAsScriptException(NashornScriptEngine.java:463)
	at org.openjdk.nashorn.api.scripting.NashornScriptEngine.invokeImpl(NashornScriptEngine.java:385)
	at org.openjdk.nashorn.api.scripting.NashornScriptEngine.invokeFunction(NashornScriptEngine.java:186)
	at noppes.npcs.controllers.ScriptContainer.run(ScriptContainer.java:151)
	at noppes.npcs.controllers.ScriptContainer.run(ScriptContainer.java:108)
	at noppes.npcs.api.wrapper.ItemScriptedWrapper.runScript(ItemScriptedWrapper.java:156)
	at noppes.npcs.EventHooks.onScriptItemInteract(EventHooks.java:520)
	at noppes.npcs.ScriptPlayerEventHandler.invoke(ScriptPlayerEventHandler.java:113)
	at net.minecraftforge.eventbus.ASMEventHandler_70_ScriptPlayerEventHandler_invoke_RightClickBlock.invoke(.dynamic)
	at net.minecraftforge.eventbus.ASMEventHandler.invoke(ASMEventHandler.java:85)
	at net.minecraftforge.eventbus.EventBus.post(EventBus.java:302)
	at net.minecraftforge.eventbus.EventBus.post(EventBus.java:283)
	at net.minecraftforge.common.ForgeHooks.onRightClickBlock(ForgeHooks.java:824)
	at net.minecraft.server.management.PlayerInteractionManager.func_219441_a(PlayerInteractionManager.java:318)
	at net.minecraft.network.play.ServerPlayNetHandler.func_184337_a(ServerPlayNetHandler.java:958)
	at net.minecraft.network.play.client.CPlayerTryUseItemOnBlockPacket.func_148833_a(SourceFile:36)
	at net.minecraft.network.play.client.CPlayerTryUseItemOnBlockPacket.func_148833_a(SourceFile:10)
	at net.minecraft.network.PacketThreadUtil.lambda$checkThreadAndEnqueue$0(PacketThreadUtil.java:36)
	at net.optifine.util.PacketRunnable.run(PacketRunnable.java:28)
	at net.minecraft.util.concurrent.TickDelayedTask.run(SourceFile:18)
	at net.minecraft.util.concurrent.ThreadTaskExecutor.func_213166_h(ThreadTaskExecutor.java:189)
	at net.minecraft.util.concurrent.RecursiveEventLoop.func_213166_h(SourceFile:23)
	at net.minecraft.server.MinecraftServer.func_213166_h(MinecraftServer.java:734)
	at net.minecraft.server.MinecraftServer.func_213166_h(MinecraftServer.java:159)
	at net.minecraft.util.concurrent.ThreadTaskExecutor.func_213168_p(ThreadTaskExecutor.java:151)
	at net.minecraft.server.MinecraftServer.func_213205_aW(MinecraftServer.java:717)
	at net.minecraft.server.MinecraftServer.func_213168_p(MinecraftServer.java:711)
	at net.minecraft.util.concurrent.ThreadTaskExecutor.func_213161_c(ThreadTaskExecutor.java:167)
	at net.minecraft.server.MinecraftServer.func_213202_o(MinecraftServer.java:697)
	at net.minecraft.server.MinecraftServer.func_240802_v_(MinecraftServer.java:646)
	at net.minecraft.server.MinecraftServer.func_240783_a_(MinecraftServer.java:232)
	at java.base/java.lang.Thread.run(Thread.java:831)
Caused by: <eval>:25 TypeError: target.getPos is not a function
	at org.openjdk.nashorn.internal.runtime.ECMAErrors.error(ECMAErrors.java:57)
	at org.openjdk.nashorn.internal.runtime.ECMAErrors.typeError(ECMAErrors.java:212)
	at org.openjdk.nashorn.internal.runtime.ECMAErrors.typeError(ECMAErrors.java:184)
	at org.openjdk.nashorn.internal.runtime.ECMAErrors.typeError(ECMAErrors.java:171)
	at org.openjdk.nashorn.internal.runtime.Undefined.lookup(Undefined.java:100)
	at org.openjdk.nashorn.internal.runtime.linker.NashornLinker.getGuardedInvocation(NashornLinker.java:106)
	at org.openjdk.nashorn.internal.runtime.linker.NashornLinker.getGuardedInvocation(NashornLinker.java:96)
	at jdk.dynalink/jdk.dynalink.linker.support.CompositeTypeBasedGuardingDynamicLinker.getGuardedInvocation(CompositeTypeBasedGuardingDynamicLinker.java:161)
	at jdk.dynalink/jdk.dynalink.linker.support.CompositeGuardingDynamicLinker.getGuardedInvocation(CompositeGuardingDynamicLinker.java:109)
	at jdk.dynalink/jdk.dynalink.LinkerServicesImpl.lambda$getGuardedInvocation$0(LinkerServicesImpl.java:137)
	at jdk.dynalink/jdk.dynalink.LinkerServicesImpl.getWithLookupInternal(LinkerServicesImpl.java:168)
	at jdk.dynalink/jdk.dynalink.LinkerServicesImpl.getGuardedInvocation(LinkerServicesImpl.java:135)
	at jdk.dynalink/jdk.dynalink.DynamicLinker.relink(DynamicLinker.java:241)
	at org.openjdk.nashorn.internal.scripts.Script$Recompilation$391$394A$\\^eval\\_.interact(<eval>:25)
	at org.openjdk.nashorn.internal.runtime.ScriptFunctionData.invoke(ScriptFunctionData.java:648)
	at org.openjdk.nashorn.internal.runtime.ScriptFunction.invoke(ScriptFunction.java:513)
	at org.openjdk.nashorn.internal.runtime.ScriptRuntime.apply(ScriptRuntime.java:520)
	at org.openjdk.nashorn.api.scripting.ScriptObjectMirror.callMember(ScriptObjectMirror.java:187)
	at org.openjdk.nashorn.api.scripting.NashornScriptEngine.invokeImpl(NashornScriptEngine.java:379)
	... 30 more"
                                    }
                                ],
                                "Script": "var cooldown = 15;

function init(event) {
    event.item.setTexture(\"minecraft:stick\");
    event.item.setCustomName('Жезл молний');
    event.item.setLore([\"Выглядит как\", \"обычная палка\"]);
    event.item.setColor(0xffffff);
    event.item.setDurabilityShow(true);
    event.item.setAttribute(\"generic.attack_damage\", 14, 0);
    event.item.setAttribute(\"generic.attack_speed\", -2.5, 0);
}

function interact(event) {
    var target = event.player.rayTraceBlock(1000, false, false).getPos();
    
    if (target === null || isUnderCeiling(event.player.getWorld(), target, 25) || event.item.getDurabilityValue() < 1) return;
    
    event.API.executeCommand(
        event.player.getWorld(),
        \"/summon minecraft:lightning_bolt \" + target.getX() + \" \" + target.getY() + \" \" + target.getZ()
    );
    event.item.setTexture(\"minecraft:blaze_rod\");
    event.item.setDurabilityValue(0);
    
    if (target.distanceTo(event.API.getIPos(-142, 68, -96)) <= 2.5) {
        event.target.getWorld().getScoreboard().setPlayerScore(event.player.getDisplayName(), \"grave_charged\", 1);
    }
}

function tick(event) {
    event.item.setTexture(\"minecraft:stick\");
    
    if (event.item.getDurabilityValue() < 1) {
        event.item.setDurabilityValue(event.item.getDurabilityValue() + 1 / (cooldown * CNPCS_TICKS))
    }
}",
                                "ScriptList": [
                                    {
                                        "Line": "globals.js"
                                    },
                                    {
                                        "Line": "tk.js"
                                    }
                                ]
                            }
                        ],
                        "ScriptTexture": "minecraft:blaze_rod",
                        "ScriptLanguage": "ECMAScript"
                    },
                    "AttributeModifiers": [
                        {
                            "Amount": 14.0d,
                            "Slot": "mainhand",
                            "AttributeName": "generic.attack_damage",
                            "Operation": 0,
                            "UUID": [I;82349934,-1008384863,-2130197476,-872122921],
                            "Name": "generic.attack_damage"
                        },
                        {
                            "Amount": -2.5d,
                            "Slot": "mainhand",
                            "AttributeName": "generic.attack_speed",
                            "Operation": 0,
                            "UUID": [I;-259106100,408898396,-1396474212,1371295501],
                            "Name": "generic.attack_speed"
                        }
                    ],
                    "display": {
                        "Lore": [
                            "{\"translate\":\"Выглядит как\"}",
                            "{\"translate\":\"обычная палка\"}"
                        ],
                        "Name": "{\"translate\":\"Жезл молний\"}"
                    }
                }
            },
            {
                "Slot": 15b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                    }
                },
                "id": "minecraft:leather_leggings",
                "Count": 1b,
                "tag": {
                    "RepairCost": 0,
                    "Damage": 0,
                    "display": {
                        "color": 16369622,
                        "Name": "{\"text\":\"Ахахахахаха\"}"
                    },
                    "Enchantments": [
                        {
                            "lvl": 1s,
                            "id": "minecraft:protection"
                        }
                    ]
                }
            },
            {
                "Slot": 16b,
                "ForgeCaps": {
                    "customnpcs:itemscripteddata": {
                    }
                },
                "id": "minecraft:crossbow",
                "Count": 1b,
                "tag": {
                    "RepairCost": 0,
                    "Damage": 320,
                    "display": {
                        "Name": "{\"text\":\"Неопрятный арбалет\"}"
                    }
                }
            }
        ]
    },
    "StandingState": 0,
    "AttackInvisible": 0b,
    "NpcInteractNPCLines": {
        "Lines": [
        ]
    },
    "HurtTime": 0s,
    "WalkingRange": 10,
    "ShotCount": 1,
    "pDur": 5,
    "TraderIgnoreDamage": 0b,
    "AttackRange": 2,
    "NpcKillLines": {
        "Lines": [
        ]
    },
    "PotionImmune": 0b,
    "AvoidsSun": 0b,
    "Texture": "customnpcs:textures/entity/humanmale/steve.png",
    "NpcJob": 0,
    "BurstCount": 1,
    "NpcAttackLines": {
        "Lines": [
        ]
    },
    "pSpeed": 10,
    "pArea": 0,
    "DeathTime": 0s,
    "pImpact": 0,
    "MoveState": 0,
    "pRender3D": 1b,
    "Motion": [
        0.0d,
        -0.0784000015258789d,
        0.0d
    ],
    "CombatRegen": 0,
    "NpcsTimers": [
    ],
    "MarkovGender": 0,
    "pEffect": 0,
    "DistanceToMelee": 0,
    "NpcStepSound": "",
    "FireRate": 5,
    "LeftHanded": 0b,
    "pEffAmp": 0,
    "OnGround": 1b,
    "ImmuneToFire": 0b,
    "NpcKilledLines": {
        "Lines": [
        ]
    },
    "TraderMarket": "",
    "Fire": -1s,
    "ArmorItems": [
        {
        },
        {
        },
        {
        },
        {
        }
    ],
    "DisablePitch": 0b,
    "pPhysics": 1b,
    "TransformHasInv": 0b,
    "NpcInteractLines": {
        "Lines": [
        ]
    },
    "HurtByTimestamp": 366,
    "TraderCurrency": {
        "NpcMiscInv": [
        ]
    },
    "pSpin": 0b,
    "NpcHurtSound": "minecraft:entity.player.hurt",
    "pTrail": 0,
    "CreatureType": 0,
    "Attributes": [
        {
            "Base": 20.0d,
            "Name": "minecraft:generic.max_health"
        },
        {
            "Base": 0.5d,
            "Name": "minecraft:generic.flying_speed"
        },
        {
            "Base": 5.0d,
            "Name": "minecraft:generic.attack_damage"
        },
        {
            "Base": 0.25d,
            "Name": "minecraft:generic.movement_speed"
        },
        {
            "Base": 0.08d,
            "Name": "forge:entity_gravity"
        },
        {
            "Base": 32.0d,
            "Name": "minecraft:generic.follow_range"
        }
    ],
    "Invulnerable": 0b,
    "TransformHasDisplay": 0b,
    "NoFallDamage": 0b,
    "AbsorptionAmount": 0.0f,
    "TransformHasRole": 0b,
    "Name": "Weaponsmith",
    "FallDistance": 0.0f,
    "SkinColor": 16777215,
    "NpcIdleSound": "",
    "Weapons": [
    ],
    "NPCDialogOptions": [
    ],
    "AggroRange": 16,
    "DirectLOS": 1b,
    "HealthRegen": 1,
    "ForgeCaps": {
    },
    "HandDropChances": [
        0.085f,
        0.085f
    ],
    "NpcModelData": {
        "LegsConfig": {
            "NotShared": 0b,
            "ScaleZ": 1.0f,
            "TransZ": 0.0f,
            "TransY": 0.0f,
            "TransX": 0.012000002f,
            "ScaleY": 1.0f,
            "ScaleX": 1.0f
        },
        "BodyConfig": {
            "NotShared": 0b,
            "ScaleZ": 1.0f,
            "TransZ": 0.0f,
            "TransY": 0.0f,
            "TransX": 0.0f,
            "ScaleY": 1.0f,
            "ScaleX": 1.0f
        },
        "Eyes": {
            "Pattern": 0b,
            "Glint": 1b,
            "Type": 0b,
            "PositionY": 1,
            "SkinColor": 11830381,
            "PlayerTexture": 0b,
            "Color": 3361970,
            "BrowColor": 5982516,
            "BrowThickness": 4
        },
        "LegParts": {
            "Pattern": 0b,
            "Type": 0b,
            "PlayerTexture": 0b,
            "Color": 16777215
        },
        "Parts": [
        ],
        "SimpleRender": 0b,
        "ArmsConfig": {
            "NotShared": 0b,
            "ScaleZ": 1.0f,
            "TransZ": 0.0f,
            "TransY": 0.0f,
            "TransX": 0.0f,
            "ScaleY": 1.0f,
            "ScaleX": 1.0f
        },
        "ExtraData": {
        },
        "HeadConfig": {
            "NotShared": 0b,
            "ScaleZ": 1.0f,
            "TransZ": 0.0f,
            "TransY": 0.0f,
            "TransX": 0.0f,
            "ScaleY": 1.0f,
            "ScaleX": 1.0f
        }
    },
    "VisibleAvailability": {
        "AvailabilityQuestId": -1,
        "AvailabilityScoreboardType": 1,
        "AvailabilityFactionStance": 0,
        "AvailabilityScoreboard2Value": 1,
        "AvailabilityQuest": 0,
        "AvailabilityDialog4": 0,
        "AvailabilityScoreboardObjective": "",
        "AvailabilityDialog3": 0,
        "AvailabilityQuest2": 0,
        "AvailabilityQuest3": 0,
        "AvailabilityScoreboard2Objective": "",
        "AvailabilityQuest4": 0,
        "ModRev": 18,
        "AvailabilityDialog2": 0,
        "AvailabilityDayTime": 0,
        "AvailabilityFaction2Id": -1,
        "AvailabilityScoreboardValue": 1,
        "AvailabilityFaction": 0,
        "AvailabilityDialog": 0,
        "AvailabilityScoreboard2Type": 1,
        "AvailabilityFaction2": 0,
        "AvailabilityFactionId": -1,
        "AvailabilityFaction2Stance": 0,
        "AvailabilityDialogId": -1,
        "AvailabilityQuest4Id": -1,
        "AvailabilityQuest3Id": -1,
        "AvailabilityQuest2Id": -1,
        "AvailabilityDialog2Id": -1,
        "AvailabilityDialog3Id": -1,
        "AvailabilityDialog4Id": -1,
        "AvailabilityMinPlayerLevel": 0
    },
    "minDelay": 20,
    "DoorInteract": 2,
    "MoveSpeed": 5,
    "TransformEditingModus": 0b,
    "UsingSkinUrl": 0b,
    "SkinUrl": "",
    "CanSwim": 1b,
    "TraderIgnoreNBT": 0b,
    "GroundSound": "minecraft:block.stone.break",
    "MaxHealth": 20,
    "HideBodyWhenKilled": 0b,
    "AttackSpeed": 20,
    "PotionDuration": 5,
    "maxDelay": 40,
    "ScriptEnabled": 0b,
    "Role": 1,
    "DropChance": [
        {
            "Integer": 100,
            "Slot": 0
        },
        {
            "Integer": 100,
            "Slot": 1
        },
        {
            "Integer": 100,
            "Slot": 2
        },
        {
            "Integer": 100,
            "Slot": 3
        },
        {
            "Integer": 100,
            "Slot": 4
        },
        {
            "Integer": 100,
            "Slot": 5
        },
        {
            "Integer": 100,
            "Slot": 6
        },
        {
            "Integer": 100,
            "Slot": 7
        },
        {
            "Integer": 100,
            "Slot": 8
        }
    ],
    "FactionPoints": {
        "DecreaseFaction1Points": 0b,
        "OptionFaction2Points": 100,
        "OptionFactions1": -1,
        "OptionFactions2": -1,
        "OptionFaction1Points": 100,
        "DecreaseFaction2Points": 0b
    },
    "pDamage": 4,
    "KilledTime": 0L,
    "AimWhileShooting": 0b,
    "CanPickUpLoot": 0b,
    "AttackOtherFactions": 0b,
    "CanDrown": 1b,
    "pSize": 5,
    "CanSprint": 0b,
    "CanLeap": 0b,
    "TransformIsActive": 0b,
    "ForgeData": {
        "cnpcmarkdata": {
            "marks": [
            ]
        }
    },
    "MovingState": 0,
    "MovingPos": 0,
    "PotionAmp": 0,
    "OnAttack": 3,
    "FallFlying": 0b,
    "MaxExp": 0,
    "OrderedLines": 0b,
    "PortalCooldown": 0,
    "pGlows": 0b,
    "TransformHasAdvanced": 0b,
    "TransformHasStats": 0b,
    "MovementType": 0,
    "FiringSound": "minecraft:entity.arrow.shoot",
    "ModRev": 18,
    "Accuracy": 60,
    "MinExp": 0,
    "Armor": [
    ],
    "CloakTexture": "",
    "GlowTexture": "",
    "MaxFiringRange": 15,
    "pXlr8": 0b,
    "MarkovGeneratorId": 3,
    "Scripts": [
    ],
    "Health": 20.0f,
    "pStick": 0b,
    "MovingPause": 1b,
    "NpcDeathSound": "minecraft:entity.player.hurt",
    "FactionID": 3,
    "Title": "",
    "TotalTicksAlive": 20791L,
    "Rotation": [
        235.3736f,
        -0.17850564f
    ],
    "ShowName": 0,
    "npcInteracting": 1b,
    "AvoidsWater": 0b,
    "NoLivingAnimation": 0b,
    "SpawnCycle": 0
}
